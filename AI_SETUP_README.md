# ุฑุงูููุง ูพฺฉุฑุจูุฏ ุณุณุชู ููุด ูุตููุน

ุงู ูพุฑูฺู ุงฺฉููู ุงุฒ OpenAI GPT-4 ุจุฑุง ูพุงุณุฎฺฏู ุจู ฺฉุงุฑุจุฑุงู ุจุง ููุดโูุง ูุฎุชูู ุงุณุชูุงุฏู ูโฺฉูุฏ.

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

### 1. **ูพุฑุงููพุชโูุง ุณุณุชู** (`src/lib/aiPrompts.ts`)
ุงู ูุงู ุดุงูู ูพุฑุงููพุชโูุง ุณุณุชู ุจุฑุง ูุฑ ููุด ฺฉุงุฑุจุฑ ุงุณุช:
- `principal` (ูุฏุฑ)
- `teacher` (ูุนูู)
- `parent` (ูุงูุฏ)
- `student` (ุฏุงูุดโุขููุฒ)
- `grading` (ุชุตุญุญ ุฎูุฏฺฉุงุฑ)

#### ุชูุธูุงุช ูุฑ ููุด:
```typescript
{
  role: string;           // ููุด ฺฉุงุฑุจุฑ
  systemPrompt: string;   // ูพุฑุงููพุช ุณุณุชู (ุฏุณุชูุฑุงูุนูู ุจุฑุง AI)
  model: string;          // ูุฏู OpenAI (ูุซู gpt-4-turbo-preview)
  temperature: number;    // ูุฒุงู ุฎูุงูุช (0.0 ุชุง 1.0)
  maxTokens: number;      // ุญุฏุงฺฉุซุฑ ุทูู ูพุงุณุฎ
}
```

#### ฺฺฏููู ูพุฑุงููพุช ุณุณุชู ุฑุง ุชุบุฑ ุฏููุ
ูุงู `src/lib/aiPrompts.ts` ุฑุง ูุฑุงุด ฺฉูุฏ ู `systemPrompt` ูุฑุจูุท ุจู ููุด ููุฑุฏ ูุธุฑ ุฑุง ุชุบุฑ ุฏูุฏ:

```typescript
teacher: {
  role: "teacher",
  systemPrompt: `ุดูุง ฺฉ ุฏุณุชุงุฑ ููุดููุฏ ุขููุฒุด ุจุฑุง ูุนููุงู ูุณุชุฏ...`,
  model: "gpt-4-turbo-preview",
  temperature: 0.7,
  maxTokens: 2000,
}
```

### 2. **ุณุฑูุณ ููุด ูุตููุน** (`src/lib/aiService.ts`)
ุงู ูุงู ูุณุฆูู ุงุฑุชุจุงุท ุจุง OpenAI API ุงุณุช ู ุดุงูู:
- ุงุชุตุงู ุจู OpenAI
- ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง
- ุฏุฑุงูุช ู ูพุฑุฏุงุฒุด ูพุงุณุฎโูุง
- ูุฏุฑุช ุฎุทุงูุง

### 3. **API Route** (`src/app/api/ai-chat/route.ts`)
ุงู endpoint ุฏุฑุฎูุงุณุชโูุง ฺฉุงุฑุจุฑุงู ุฑุง ุฏุฑุงูุช ู ุจู ุณุฑูุณ AI ุงุฑุณุงู ูโฺฉูุฏ.

**ุขุฏุฑุณ:** `POST /api/ai-chat`

**ูุฑูุฏ:**
```json
{
  "messages": [
    {
      "role": "user",
      "content": "ุณูุงู ฺฉุงุฑุจุฑ"
    }
  ]
}
```

**ุฎุฑูุฌ:**
```json
{
  "success": true,
  "message": "ูพุงุณุฎ ููุด ูุตููุน"
}
```

## ๐ ุชูุธู API Key

### ูุฑุญูู 1: ุฏุฑุงูุช API Key ุงุฒ OpenAI
1. ุจู [OpenAI Platform](https://platform.openai.com/api-keys) ุจุฑูุฏ
2. ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ ุง ุซุจุชโูุงู ฺฉูุฏ
3. ฺฉ API Key ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ
4. ฺฉูุฏ ุฑุง ฺฉูพ ฺฉูุฏ (ููุท ฺฉ ุจุงุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ!)

### ูุฑุญูู 2: ุชูุธู ุฏุฑ ูุงู `.env.local`
ูุงู `.env.local` ุฑุง ุจุงุฒ ฺฉูุฏ ู ฺฉูุฏ ุฎูุฏ ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ:

```env
OPENAI_API_KEY=sk-proj-your-actual-api-key-here
```

โ๏ธ **ูุดุฏุงุฑ ุงููุช:**
- ูุฑฺฏุฒ ูุงู `.env.local` ุฑุง ุฏุฑ Git commit ูฺฉูุฏ
- API Key ุฎูุฏ ุฑุง ุฏุฑ ูุงูโูุง ุนููู ูุฑุงุฑ ูุฏูุฏ
- ุงุฒ `.env.example` ุจุฑุง ูุณุชูุฏุณุงุฒ ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ฏ ููุดโูุง ฺฉุงุฑุจุฑ ู Endpoints

| ููุด | ฺฉูุฏ | ุณุณุชู ูพุฑุงููพุช | ฺฉุงุฑุจุฑุฏ |
|-----|------|-------------|--------|
| ูุฏุฑ | `principal` | ุฑุงูููุง ูุฏุฑุช ู ุขููุฒุด | ูุฏุฑุช ูุฏุฑุณูุ ุงุฑุฒุงุจ ูุนููุงูุ ุจุฑูุงููโุฑุฒ |
| ูุนูู | `teacher` | ฺฉูฺฉ ุจู ุชุฏุฑุณ ูุคุซุฑ | ุฑูุดโูุง ุชุฏุฑุณุ ูุฏุฑุช ฺฉูุงุณุ ุงุฑุฒุงุจ |
| ูุงูุฏ | `parent` | ูพุดุชุจุงู ุงุฒ ุงุฏฺฏุฑ ูุฑุฒูุฏ | ุฑุงูููุง ุชุฑุจุชุ ฺฉูฺฉ ุจู ุงุฏฺฏุฑ |
| ุฏุงูุดโุขููุฒ | `student` | ุงุฏุงุฑ ุดุฎุต | ฺฉูฺฉ ุจู ุฏุฑุณุ ุญู ูุณุงุฆูุ ุจุฑูุงููโุฑุฒ |
| ุชุตุญุญ | `grading` | ุงุฑุฒุงุจ ุชฺฉุงูู | ุชุตุญุญ ุฎูุฏฺฉุงุฑุ ุจุงุฒุฎูุฑุฏ ุณุงุฒูุฏู |

## โ๏ธ ุชูุธูุงุช ูพุดุฑูุชู

### ุชุบุฑ ูุฏู AI
ุฏุฑ ูุงู `src/lib/aiPrompts.ts`ุ ูโุชูุงูุฏ ูุฏู ุฑุง ุชุบุฑ ุฏูุฏ:

```typescript
model: "gpt-4-turbo-preview"  // ุง gpt-4, gpt-3.5-turbo ู...
```

ูุฏูโูุง ููุฌูุฏ:
- `gpt-4-turbo-preview` (ูพุดููุงุฏ - ุณุฑุน ู ูุฏุฑุชููุฏ)
- `gpt-4` (ุฏููโุชุฑ ูู ฺฉูุฏุชุฑ)
- `gpt-3.5-turbo` (ุณุฑุน ู ุงุฑุฒุงู)

### ุชูุธู Temperature (ุฎูุงูุช)
```typescript
temperature: 0.7  // ุนุฏุฏ ุจู 0 ุชุง 1
```
- `0.0` = ูพุงุณุฎโูุง ูุทุน ู ฺฉุณุงู
- `0.5` = ูุชุนุงุฏู (ูพุดููุงุฏ ุจุฑุง ุขููุฒุด)
- `1.0` = ุฎูุงู ู ูุชููุน

### ุชูุธู ุญุฏุงฺฉุซุฑ ุทูู ูพุงุณุฎ
```typescript
maxTokens: 2000  // ุชุนุฏุงุฏ ุชูฺฉู (ฺฉููุงุช ุชูุฑุจ)
```

## ๐งช ุชุณุช ุณุณุชู

### ุชุณุช ุฏุฑ ูุญุท ุชูุณุนู:
1. ุณุฑูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
npm run dev
```

2. ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
```
http://localhost:4000/dashboard/teacher/ai-communication
```

3. ฺฉ ุณูุงู ุจูพุฑุณุฏ ู ูพุงุณุฎ ุฑุง ุจุจูุฏ

### ุชุณุช ุจุง curl:
```bash
curl -X POST http://localhost:4000/api/ai-chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": "ฺฺฏููู ูโุชูุงูู ฺฉูุงุณ ุฏุฑุณ ุฑุง ุจูุชุฑ ูุฏุฑุช ฺฉููุ"
      }
    ]
  }'
```

## ๐ ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### ุฎุทุง: "ฺฉูุฏ API OpenAI ุชูุธู ูุดุฏู ุงุณุช"
**ุฑุงูโุญู:** ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู `OPENAI_API_KEY` ุฏุฑ `.env.local` ุชูุธู ุดุฏู ุงุณุช.

### ุฎุทุง: "ูุญุฏูุฏุช ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุช"
**ุฑุงูโุญู:**
- ฺูุฏ ุฏููู ุตุจุฑ ฺฉูุฏ
- ุง ุงุนุชุจุงุฑ ุญุณุงุจ OpenAI ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ุฎุทุง: "ุฎุทุง ุฏุฑ ุงุญุฑุงุฒ ููุช"
**ุฑุงูโุญู:**
- API Key ุฎูุฏ ุฑุง ุฏูุจุงุฑู ฺฺฉ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ ฺฉู Key ูุนุชุจุฑ ู ูุนุงู ุงุณุช

### ูพุงุณุฎโูุง ฺฉูุฏ ูุณุชูุฏ
**ุฑุงูโุญู:**
- ูุฏู ุฑุง ุจู `gpt-3.5-turbo` ุชุบุฑ ุฏูุฏ
- ุง `maxTokens` ุฑุง ฺฉุงูุด ุฏูุฏ

## ๐ ูุฒููโูุง

ูุฏูโูุง ูุฎุชูู ูุฒููโูุง ูุชูุงูุช ุฏุงุฑูุฏ:
- **GPT-4 Turbo**: ~$0.01 per 1K tokens (input) + $0.03 per 1K tokens (output)
- **GPT-4**: ~$0.03 per 1K tokens (input) + $0.06 per 1K tokens (output)
- **GPT-3.5 Turbo**: ~$0.0005 per 1K tokens (input) + $0.0015 per 1K tokens (output)

ุจุฑุง ฺฉุงูุด ูุฒูู:
1. ุงุฒ ูุฏูโูุง ุณุจฺฉโุชุฑ ุงุณุชูุงุฏู ฺฉูุฏ
2. `maxTokens` ุฑุง ูุญุฏูุฏ ฺฉูุฏ
3. ูพุฑุงููพุชโูุง ฺฉูุชุงูโุชุฑ ุจููุณุฏ

## ๐ ุงููุช

- โ API Key ุฏุฑ ูุงู `.env.local` ุฐุฎุฑู ูโุดูุฏ (ุฎุงุฑุฌ ุงุฒ Git)
- โ ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ูุจู ุงุฒ ุงุฑุณุงู ุจู AI
- โ ุจุฑุฑุณ ููุด ฺฉุงุฑุจุฑ
- โ ูุญุฏูุฏุช ุทูู ูพุงุณุฎ
- โ ูุฏุฑุช ุฎุทุง ู ูุงฺฏ

## ๐ ููุงุจุน ุจุดุชุฑ

- [ูุณุชูุฏุงุช OpenAI](https://platform.openai.com/docs)
- [ุฑุงูููุง API Reference](https://platform.openai.com/docs/api-reference)
- [ุจูุชุฑู ุฑูุดโูุง ููุดุชู Prompt](https://platform.openai.com/docs/guides/prompt-engineering)
- [ูุฏุฑุช ูุฒูู](https://platform.openai.com/usage)

---

## ๐ ุงุฏุฏุงุดุชโูุง ุชูุณุนูโุฏููุฏู

### ุณุงุฎุชุงุฑ ูพุฑูฺู:
```
src/
โโโ lib/
โ   โโโ aiPrompts.ts      # ูพุฑุงููพุชโูุง ุณุณุชู
โ   โโโ aiService.ts      # ุณุฑูุณ OpenAI
โโโ app/
    โโโ api/
        โโโ ai-chat/
            โโโ route.ts   # API endpoint
```

### Workflow:
1. ฺฉุงุฑุจุฑ ุฏุฑ ุตูุญู chat ูพุงู ูโูุฑุณุชุฏ
2. ุฏุฑุฎูุงุณุช ุจู `/api/ai-chat` ูโุฑูุฏ
3. API route ููุด ฺฉุงุฑุจุฑ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ
4. `aiService.sendQueryToAI()` ูุฑุงุฎูุงู ูโุดูุฏ
5. ูพุฑุงููพุช ุณุณุชู ุงุฒ `aiPrompts.ts` ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ
6. ุฏุฑุฎูุงุณุช ุจู OpenAI ุงุฑุณุงู ูโุดูุฏ
7. ูพุงุณุฎ ุจู ฺฉุงุฑุจุฑ ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ

---

**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 2025-12-08
