import { NextRequest, NextResponse } from "next/server";

// Standard curriculum lessons based on lesson.md
const CURRICULUM_LESSONS: { [key: string]: string[] } = {
  // Elementary grades
  'اول': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
  ],
  'دوم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
  ],
  'سوم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
  ],
  'چهارم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
  ],
  'پنجم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
  ],
  'ششم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'آموزش قرآن',
    'هدیه‌های آسمان',
    'تفکر و پژوهش',
    'کار و فناوری',
  ],

  // Middle school grades
  'هفتم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'پیام‌های آسمان',
    'آموزش قرآن',
    'عربی',
    'زبان انگلیسی',
    'فرهنگ و هنر',
    'کار و فناوری',
    'تفکر و سبک زندگی',
  ],
  'هشتم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'پیام‌های آسمان',
    'آموزش قرآن',
    'عربی',
    'زبان انگلیسی',
    'فرهنگ و هنر',
    'کار و فناوری',
    'تفکر و سبک زندگی',
  ],
  'نهم': [
    'فارسی',
    'نگارش',
    'ریاضی',
    'علوم تجربی',
    'مطالعات اجتماعی',
    'پیام‌های آسمان',
    'آموزش قرآن',
    'عربی',
    'زبان انگلیسی',
    'فرهنگ و هنر',
    'کار و فناوری',
    'تفکر و سبک زندگی',
    'آمادگی دفاعی',
  ],

  // High school - Common subjects (دروس مشترک)
  'دهم-مشترک': [
    'زبان و ادبیات فارسی',
    'نگارش',
    'دین و زندگی',
    'عربی',
    'زبان خارجی (انگلیسی)',
    'تربیت بدنی',
    'سلامت و بهداشت',
    'تفکر و سواد رسانه‌ای',
  ],
  'یازدهم-مشترک': [
    'زبان و ادبیات فارسی',
    'نگارش',
    'دین و زندگی',
    'عربی',
    'زبان خارجی (انگلیسی)',
    'تربیت بدنی',
    'سلامت و بهداشت',
    'تفکر و سواد رسانه‌ای',
  ],
  'دوازدهم-مشترک': [
    'زبان و ادبیات فارسی',
    'نگارش',
    'دین و زندگی',
    'عربی',
    'زبان خارجی (انگلیسی)',
    'تربیت بدنی',
    'سلامت و بهداشت',
    'تفکر و سواد رسانه‌ای',
  ],

  // High school - Math & Physics track
  'دهم-ریاضی': [
    'ریاضی 1',
    'هندسه 1',
    'فیزیک 1',
    'شیمی 1',
  ],
  'یازدهم-ریاضی': [
    'ریاضی 2',
    'هندسه 2',
    'فیزیک 2',
    'شیمی 2',
  ],
  'دوازدهم-ریاضی': [
    'حسابان',
    'آمار و احتمال',
    'فیزیک 3',
    'شیمی 3',
  ],

  // High school - Experimental Sciences track
  'دهم-تجربی': [
    'زیست‌شناسی 1',
    'فیزیک 1',
    'شیمی 1',
    'ریاضی 1',
  ],
  'یازدهم-تجربی': [
    'زیست‌شناسی 2',
    'فیزیک 2',
    'شیمی 2',
  ],
  'دوازدهم-تجربی': [
    'زیست‌شناسی 3',
    'شیمی 3',
  ],

  // High school - Humanities track
  'دهم-انسانی': [
    'علوم و فنون ادبی 1',
    'تاریخ 1',
    'جغرافیا 1',
    'اقتصاد',
    'جامعه‌شناسی 1',
  ],
  'یازدهم-انسانی': [
    'علوم و فنون ادبی 2',
    'تاریخ 2',
    'جغرافیا 2',
    'فلسفه و منطق 1',
    'روان‌شناسی',
  ],
  'دوازدهم-انسانی': [
    'علوم و فنون ادبی 3',
    'فلسفه و منطق 2',
    'جامعه‌شناسی 2',
  ],

  // High school - Islamic Studies track
  'دهم-معارف': [
    'معارف اسلامی 1',
    'تفسیر قرآن 1',
    'اخلاق اسلامی',
  ],
  'یازدهم-معارف': [
    'معارف اسلامی 2',
    'تفسیر قرآن 2',
  ],
  'دوازدهم-معارف': [
    'معارف اسلامی 3',
    'تفسیر موضوعی قرآن',
  ],

  // High school - Technical & Vocational track
  'دهم-فنی': [
    'فارسی',
    'دین و زندگی',
    'عربی',
    'زبان انگلیسی',
    'تربیت بدنی',
    'دانش فنی پایه',
  ],
  'یازدهم-فنی': [
    'فارسی',
    'دین و زندگی',
    'عربی',
    'زبان انگلیسی',
    'تربیت بدنی',
    'دانش فنی تخصصی',
  ],
  'دوازدهم-فنی': [
    'فارسی',
    'دین و زندگی',
    'عربی',
    'زبان انگلیسی',
    'تربیت بدنی',
    'کارآموزی',
  ],
};

// API to get standard curriculum lessons for a specific grade level
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const gradeLevel = searchParams.get('grade_level');

    if (!gradeLevel) {
      return NextResponse.json(
        { error: "پایه تحصیلی مشخص نشده است" },
        { status: 400 }
      );
    }

    const lessons = CURRICULUM_LESSONS[gradeLevel] || [];

    return NextResponse.json({
      success: true,
      grade_level: gradeLevel,
      lessons,
      total: lessons.length,
    });
  } catch (error) {
    console.error("Curriculum lessons API error:", error);
    return NextResponse.json(
      { error: "خطا در بارگذاری دروس استاندارد" },
      { status: 500 }
    );
  }
}
